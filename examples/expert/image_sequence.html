<!DOCTYPE html>
<html class="no-js" lang="en">
<head>

	<script type="text/javascript" src="../../assets/js/lib/jquery.min.js"></script>
	<script type="text/javascript" src="../../assets/js/lib/highlight.pack.js"></script>
	<script type="text/javascript" src="../../assets/js/lib/modernizr.custom.min.js"></script>
	<script type="text/javascript" src="../../assets/js/examples.js"></script>
	
	<script type="text/javascript" src="../../assets/js/lib/gsap3/gsap.min.js"></script>
	<script type="text/javascript" src="../../scrollmagic/uncompressed/ScrollMagic.js"></script>
	<script type="text/javascript" src="../../scrollmagic/uncompressed/plugins/animation.gsap.js"></script>
	<script type="text/javascript" src="../../scrollmagic/uncompressed/plugins/debug.addIndicators.js"></script>
</head>
	
<body>
	<div id="content-wrapper">
		<div id="example-wrapper">
			<div class="scrollContent">
				<section id="titlechart">
					<div id="description">
						<h1 class="badge gsap">Image Sequence Test</h1>
						<h2>GIF-like behaviour controlled by the scroll bar</h2>
						<p>
							Animating through image sequences can be achieved by creating a tween that cycles through an array of images (like shown here).<br>
							A different approach would be to do it without TweenMax and just update the image using the scene <code>progress</code> event.<br>
							In production environments you would probably also use an image preloader to cache all images in the array.
						</p>
						<p>
							The method shown here can take advantage of the tweenmax repeat feature and will also work as an animation unbound from the scrollbar. Use the form to the left to toggle the duration if you're unsure what that means.
						</p>
						<p class="copyright">
							Drawings are courtesy of <a href="http://eledimassimo.blogspot.co.uk/" target="_blank">Eleonora Di Massimo</a>.
						</p>
						<a href="#" class="viewsource">view source</a>
					</div>
				</section>
				<section class="demo">
					<div class="spacer s2"></div>
					<div class="spacer s0" id="trigger"></div>
					<div id="imagesequence">
						<img id="myimg"/><br>
						<a href="#" class="viewsource">view source</a>
					</div>
					<div class="spacer s2"></div>
					<script>
						// define images
							var images = [
								"../../assets/img/GIF_4_frames/frame_000_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_001_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_002_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_003_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_004_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_005_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_006_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_007_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_008_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_009_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_010_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_011_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_012_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_013_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_014_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_015_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_016_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_017_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_018_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_019_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_020_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_021_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_022_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_023_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_024_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_025_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_026_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_027_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_028_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_029_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_030_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_031_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_032_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_033_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_034_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_035_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_036_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_037_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_038_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_039_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_040_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_041_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_042_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_043_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_044_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_045_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_046_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_047_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_048_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_049_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_050_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_051_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_052_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_053_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_054_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_055_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_056_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_057_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_058_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_059_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_060_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_061_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_062_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_063_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_064_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_065_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_066_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_067_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_068_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_069_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_070_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_071_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_072_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_073_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_074_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_075_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_076_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_077_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_078_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_079_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_080_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_081_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_082_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_083_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_084_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_085_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_086_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_087_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_088_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_089_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_090_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_091_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_092_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_093_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_094_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_095_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_096_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_097_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_098_delay-0.05s.gif",
								"../../assets/img/GIF_4_frames/frame_099_delay-0.05s.gif",
									];

						// TweenMax can tween any property of any object. We use this object to cycle through the array
						var obj = {curImg: 0};

						// create tween
						var tween = TweenMax.to(obj, 0.5,
							{
								curImg: images.length - 1,	// animate propery curImg to number of images
								roundProps: "curImg",				// only integers so it can be used as an array index
								repeat: 0,									// repeat 3 times
								immediateRender: true,			// load first image automatically
								ease: Linear.easeNone,			// show every image the same ammount of time
								onUpdate: function () {
								  $("#myimg").attr("src", images[obj.curImg]); // set the image source
								}
							}
						);

						// init controller
						var controller = new ScrollMagic.Controller({
							globalSceneOptions: {
								triggerHook: 'onLeave',
								duration: "100%" // this works just fine with duration 0 as well
								// However with large numbers (>20) of pinned sections display errors can occur so every section should be unpinned once it's covered by the next section.
								// Normally 100% would work for this, but here 200% is used, as Panel 3 is shown for more than 100% of scrollheight due to the pause.
							}
						});
						// build scene
						var scene = new ScrollMagic.Scene({triggerElement: "#trigger", duration: 300})
										.setTween(tween)
										.setPin("#imagesequence")
										.addIndicators() // add indicators (requires plugin)
										.addTo(controller);

						// handle form change
						$("form.move input[name=duration]:radio").change(function () {
							scene.duration($(this).val());
						});
					</script>
				</section>
				<div class="spacer s_viewport"></div>
			</div>
		</div>
	</div>
	<script type="text/javascript" src="../../assets/js/tracking.js"></script>
</body>
</html>
